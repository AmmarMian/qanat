<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Advanced tutorials" href="../advanced/index.html" /><link rel="prev" title="2 Experiments, Datasets and description files" href="experiment_dataset_yaml.html" />

    <!-- Generated with Sphinx 8.2.0 and Furo 2024.08.06 -->
        <title>3 Running experiments through a job system - Qanat 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=cfdaff8d" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #2E3440;
  --color-code-foreground: #d8dee9;
  --font-stack: Roboto, sans-serif;
  --font-stack--monospace: Open Sans, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <em>Qanat is currently in alpha. Use at your own risk.</em> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Qanat 0.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Qanat 0.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../usage/index.html">Usage</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Usage</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../usage/vocabulary.html">Concepts and vocabulary</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/running/index.html">Running an experiment</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Running an experiment</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/simple.html">Running a simple experiment with command-line arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/parameters_file.html">Running with a file containing parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/container.html">Running inside a container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/runner.html">Running through a job system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/groups.html">Running several groups of parameters in a single run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/commit.html">Running a run at a previous commit of the repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/running/rerun.html">Re-run a previous run of an experiment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/exploring_runs.html">Exploring runs of experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/progress.html">Showing progress of a run in <code class="code docutils literal notranslate"><span class="pre">qanat</span> <span class="pre">experiment</span> <span class="pre">status</span></code></a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/cli_reference/index.html">CLI Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of CLI Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/init.html">qanat init</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/config.html">qanat config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/cache.html">qanat cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/dataset.html">qanat dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/document.html">qanat document</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/experiment.html">qanat experiment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/cli_reference/status.html">qanat status</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../usage/description_files/index.html">Description files</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Description files</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../usage/description_files/dataset.html">Dataset description file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/description_files/experiment.html">Experiment description file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../usage/description_files/run.html">Run launching description file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Basics</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Basics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gettingstarted.html"><span class="sectnum">1 </span>Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="experiment_dataset_yaml.html"><span class="sectnum">2 </span>Experiments, Datasets and description files</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#"><span class="sectnum">3 </span>Running experiments through a job system</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/index.html">Advanced tutorials</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modules.html">qanat</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of qanat</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../qanat.html">qanat package</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of qanat package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../qanat.cli_commands.html">qanat.cli_commands package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qanat.core.html">qanat.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qanat.utils.html">qanat.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../history.html">History</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/AmmarMian/qanat/blob/main/docsrc/tutorials/basics/run_job_cluster.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/AmmarMian/qanat/edit/main/docsrc/tutorials/basics/run_job_cluster.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="running-experiments-through-a-job-system">
<h1><span class="sectnum">3 </span>Running experiments through a job system<a class="headerlink" href="#running-experiments-through-a-job-system" title="Link to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>In this tutorial, we will see how to run experiments through a job allocation system. It is comprised of two parts depending on the cluster configuration:</dt><dd><ul class="simple">
<li><p>The case of HTCondor (<a class="reference external" href="https://htcondor.readthedocs.io/en/latest/">https://htcondor.readthedocs.io/en/latest/</a>) system</p></li>
<li><p>The case of SLURM (<a class="reference external" href="https://slurm.schedmd.com/documentation.html">https://slurm.schedmd.com/documentation.html</a>) system</p></li>
</ul>
</dd>
</dl>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code of this tutorial is available at: TODO</p>
</div>
<section id="objectives">
<h2><span class="sectnum">3.1 </span>Objectives<a class="headerlink" href="#objectives" title="Link to this heading">¶</a></h2>
<p>In this tutorial we will try to run the previous tutorial (<a class="reference internal" href="experiment_dataset_yaml.html"><span class="doc">2   Experiments, Datasets and description files</span></a>) through a job allocation system. We will see how to take the existing Qanat project structure and run the experiments on the cluster.</p>
</section>
<section id="setting-up-the-project-and-environment">
<h2><span class="sectnum">3.2 </span>Setting up the project and environment<a class="headerlink" href="#setting-up-the-project-and-environment" title="Link to this heading">¶</a></h2>
<p>We assume that you already have done the previous tutorial (<a class="reference internal" href="experiment_dataset_yaml.html"><span class="doc">2   Experiments, Datasets and description files</span></a>) or downloaded its code and setup the Qanat project. If you did it on your local machine that do not have a job system, you need to copy the project over to the job submission server or redo those steps on the machine.</p>
<p>The problem that needs adressing is to have installation of python working on both the job submission server and the job execution server. This is because the job submission server will be responsible for submitting the jobs to the job execution server and will need to have Qanat installed. The job execution server will be responsible for running the experiments and should be able to execute the scripts of the experiments.</p>
<dl class="simple">
<dt>One workaround that is useful is to recast the experiment executable as a bash script that will do the following:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>Make it so that the python environment is setup. This can be done depending on your setup:</dt><dd><ul>
<li><p>If you are using conda, you can use the conda activate command to activate the environment that will be stored in a shared filesystem between the job submission server and the job execution server.</p></li>
<li><p>If you have a working python executable somewhere in the shared filesystem, you can use it to run the experiment by specifying the full path to the python executable.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Run the python script of the experiment by also forwarding the arguments to the script. This can be done by using the $&#64; variable in bash and it is very important since the python script need to access the <cite>–storage_path</cite> and <cite>–dataset_path</cite> options.</p></li>
</ul>
</dd>
</dl>
<p>In this case, you need to update the experiment executable and executable command with <cite>qanat experiment update summary_iris</cite>.</p>
<p>Another approach is to use a containerized environment. This is a more robust approach but requires more setup. We will not cover it in this tutorial. See (TODO-ADD-LINK) for more information.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We assume in Qanat that the current working directory is available on the job execution server. This is because the experiment executable is a python script that is run from the current working directory. This a limitation of the package.</p>
</div>
</section>
<section id="htcondor">
<h2><span class="sectnum">3.3 </span>HTCondor<a class="headerlink" href="#htcondor" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Usually when submitting a job through HTCondor, you need to specify a submit description file (<cite>jobname.submit</cite>) that will contain the description of the job. This file will contain the following information:</dt><dd><ul class="simple">
<li><p>The executable that will be run</p></li>
<li><p>The arguments that will be passed to the executable</p></li>
<li><p>The environment variables that will be set</p></li>
<li><p>The input and output files that will be used</p></li>
<li><p>The resources that will be used</p></li>
<li><p>The queue that will be used</p></li>
</ul>
</dd>
</dl>
<p>See (<a class="reference external" href="https://htcondor.readthedocs.io/en/latest/users-manual/submitting-a-job.html">https://htcondor.readthedocs.io/en/latest/users-manual/submitting-a-job.html</a>) for more information.</p>
<p>Qanat takes a similar approach but ditch the need of a submit description file for each executable. Instead, we use YAML description file as a template that will contain the keywords (ressources, groups, etc). When running Qanat will parse those descriptors and submit a job with the right executable and arguments for you thanks to the python bindings of HTCondor.</p>
<p>For example, the default template (when no template is specified for a job) is the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">+WishedAcctGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">group_usmb.listic</span>
<span class="nt">getenv</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
<span class="nt">request_cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">request_disk</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="nt">request_gpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">request_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="nt">universe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vanilla</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <cite>+WishedAcctGroup</cite> is a custom keyword that is used to specify the group that will be used for the job. It is used by the job allocation system to determine the group that will be used for the job. The default group is the one I have in the MUST datacenter of Université Savoie Mont-Blanc. You will need to change it in the <cite>.qanat/config.yaml</cite> according to your needs.</p>
</div>
<dl class="simple">
<dt>In order to run the experiment through HTCondor, we need two things:</dt><dd><ul class="simple">
<li><p>to specify the runner as <cite>htcondor</cite> when running the experiment with <cite>qanat run</cite> command</p></li>
<li><p>to specify the template that will be used for the job. This can be done by specifying the <cite>–submit_template</cite> option to put at the end of the <cite>qanat run</cite> command. If no template is specified, the previous default one is used.</p></li>
</ul>
</dd>
</dl>
<p>A command to run the experiment through HTCondor would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>qanat<span class="w"> </span>run<span class="w"> </span>--runner<span class="w"> </span>htcondor<span class="w"> </span>summary_iris<span class="w"> </span>--submit_template<span class="w"> </span>htcondor_template.yaml
</pre></div>
</div>
<p>Another approach to have several templates without having different templates files is to put them in the qanat configuration file <cite>.qanat/config.yaml</cite> which looks like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">default_editor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vim</span>
<span class="nt">htcondor</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span>
<span class="w">    </span><span class="nt">+WishedAcctGroup</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;group_usmb.listic&quot;&#39;</span>
<span class="w">    </span><span class="nt">getenv</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
<span class="w">    </span><span class="nt">request_cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">request_disk</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="w">    </span><span class="nt">request_gpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">request_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="w">    </span><span class="nt">universe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vanilla</span>
<span class="nt">logging</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span>
<span class="nt">result_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">results</span>
<span class="nt">slurm</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span>
<span class="w">    </span><span class="nt">--cpus-per-task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">--ntasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">--time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1-00:00:00</span>
</pre></div>
</div>
<p>You can edit the file to add your own templates. For example, if you want to add a template for a job that will use 2 cpus and 2GB of memory, you can add the following lines:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">htcondor</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span>
<span class="w">    </span><span class="nt">+WishedAcctGroup</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;group_usmb.listic&quot;&#39;</span>
<span class="w">    </span><span class="nt">getenv</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
<span class="w">    </span><span class="nt">request_cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">request_disk</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="w">    </span><span class="nt">request_gpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">request_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
<span class="w">    </span><span class="nt">universe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vanilla</span>
<span class="w">  </span><span class="nt">two_cpus</span><span class="p">:</span>
<span class="w">    </span><span class="nt">+WishedAcctGroup</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&quot;group_usmb.listic&#39;&quot;</span>
<span class="w">    </span><span class="s">getenv:</span><span class="nv"> </span><span class="s">&#39;true&#39;</span>
<span class="w">    </span><span class="s">request_cpus:</span><span class="nv"> </span><span class="s">2</span>
<span class="w">    </span><span class="s">request_disk:</span><span class="nv"> </span><span class="s">1GB</span>
<span class="w">    </span><span class="s">request_gpus:</span><span class="nv"> </span><span class="s">0</span>
<span class="w">    </span><span class="s">request_memory:</span><span class="nv"> </span><span class="s">2GB</span>
<span class="w">    </span><span class="s">universe:</span><span class="nv"> </span><span class="s">vanilla</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <cite>getenv</cite> option is used to make sure that the environment variables are forwarded to the job execution server. This allows to use the python environment that is setup on the job submission server on the job execution server.</p>
<p>Notice also the ‘””’ around the group name. This is because the group name is a string and the <cite>+WishedAcctGroup</cite> option is a string. If you do not put the ‘””’, the group name will not be interpreted correctly.</p>
</div>
<p>Then you can run the experiment with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">qanat run --runner htcondor summary_iris --submit_template two_cpus</span>
</pre></div>
</div>
<p>If you manage to configure this, you will be able to launch the experiment and have the following output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[13:17:55] INFO     Run 4 created.                                                                                                                                                      run.py:1078</span>
<span class="go">           INFO     Setting up the run...                                                                                                                                               run.py:1179</span>
<span class="go">           INFO     Single group of parameters detected                                                                                                                                 runs.py:209</span>
<span class="go">           INFO     Creating /mustfs/MUST-DATA/listic/amian/iris_mnist/results/summary_iris/run_4                                                                                       runs.py:210</span>
<span class="go">           INFO     Running the experiment...                                                                                                                                           run.py:1188</span>
<span class="go">           INFO     Submitting job for command python experiments/summary_statistics/iris.py --storage_path /mustfs/MUST-DATA/listic/amian/iris_mnist/results/summary_iris/run_4        runs.py:806</span>
<span class="go">                     --dataset_path /mustfs/MUST-DATA/listic/amian/iris_mnist/data/iris</span>
<span class="go">           INFO     Jobs submitted to clusters                                                                                                                                          runs.py:829</span>
<span class="go">           INFO       - 4651</span>
</pre></div>
</div>
<p>You can check that the job has been submitted by running the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">condor_q</span>


<span class="go">-- Schedd: lappusmb7a.in2p3.fr : &lt;134.158.84.226:9618?... @ 06/29/23 13:18:02</span>
<span class="go">OWNER     BATCH_NAME        SUBMITTED   DONE   RUN    IDLE  TOTAL JOB_IDS</span>
<span class="go">ammarmian summary_iris_4   6/29 13:17      _      1      _      1 4651.0</span>

<span class="go">Total for query: 1 jobs; 0 completed, 0 removed, 0 idle, 1 running, 0 held, 0 suspended</span>
<span class="go">Total for ammarmian: 1 jobs; 0 completed, 0 removed, 0 idle, 1 running, 0 held, 0 suspended</span>
<span class="go">Total for all users: 3 jobs; 0 completed, 0 removed, 0 idle, 3 running, 0 held, 0 suspended</span>
</pre></div>
</div>
<p>You can also check the status of the run with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; qanat experiment status summary_iris</span>
<span class="go">🔖 Name: summary_iris</span>
<span class="go">💬 Description: Summary statistics on IRIS dataset</span>
<span class="go">📁 Path: experiments/summary_statistics</span>
<span class="go">💾 Datasets:[&#39;iris&#39;]</span>
<span class="go">⚙ Executable: experiments/summary_statistics/iris.py</span>
<span class="go">⚙ Execute command: python</span>
<span class="go">⏳ Number of runs: 3</span>
<span class="go">🏷  Tags: [&#39;First-order&#39;, &#39;Histograms&#39;, &#39;Correlation&#39;, &#39;Statistics&#39;]</span>
<span class="go">🛠 Actions:</span>
<span class="go">  - plot: Plot summary statistics about the dataset</span>

<span class="go">⏳ Runs:</span>
<span class="go">🆔 ID    💬 Description    📁 Path                       🖥 Runner    📆 Launch date                ⏱ Duration        🔍 Status    🏷  Tags    ⏳ Progress</span>
<span class="go">4                          results/summary_iris/run_4    htcondor    2023-06-29 13:17:58           0:00:11.333462        ▶</span>
<span class="go">1                          results/summary_iris/run_1     local      2023-06-29 10:51:06.260540    0:00:00.319506       🏁</span>
<span class="go">3                          results/summary_iris/run_3    htcondor    2023-06-29 11:35:04           0:00:14              🏁</span>
</pre></div>
</div>
<p>Once the job is finished, you can check the results in the <cite>results/summary_iris/run_4</cite> directory. You can also check the status explore the run through a prompt with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; qanat experiment run_explore summary_iris 4                                                                                                                                                   ─╯
Run 4 of experiment summary_iris informations:
  - 🆔 Id: 4
  - 💬 description:
  - 🏷  Tags
  - 🖥 Runner: htcondor
  - 📓 Runner parameters:
        ◾ --submit_template: default
  - 📁 Path: results/summary_iris/run_4
  - 🔍 Status: 🏁
  - 📆 Start time: 2023-06-29 13:17:58
  - 📆 End time: 2023-06-29 13:18:15
  - 📑 Commit: eac4a826bbbfc2700f4dd2f860acd802f62bd5b6


Run 4 of experiment summary_iris - Explore menu
&gt; [a] Show output(s)
  [b] Show error(s)
  [c] Show parameters
  [d] Show comment
  [e] Explore run directory
  [f] Show HTCondor log(s)
  [g] Delete run
  [h] Action: plot
┌── preview ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ Show output(s) of the run with less                                                                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can see that an option has been added to the menu: <cite>Show HTCondor log(s)</cite> which will allow you to see the logs of the job. When more than one job is submitted, you can see the logs of all the jobs for each separate command used.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this tutorial we simplified with a script that use no parameters but you can specify them after the experiment_name in the <cite>qanat experiment run</cite> command like usual. You can also do groups of parameters and range on options. This is of course the point: being able to run the same experiments over a grid of parameters that are executed over several machines. For more information: See (TODO).</p>
</div>
</section>
<section id="slurm">
<h2><span class="sectnum">3.4 </span>SLURM<a class="headerlink" href="#slurm" title="Link to this heading">¶</a></h2>
<p>SLURM is a job scheduler that is used on many clusters. It is very similar to HTCondor and the configuration is very similar.</p>
<p>TODO</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../advanced/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Advanced tutorials</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="experiment_dataset_yaml.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="sectnum">2 </span>Experiments, Datasets and description files</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Ammar Mian
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#"><span class="sectnum">3 </span>Running experiments through a job system</a><ul>
<li><a class="reference internal" href="#objectives"><span class="sectnum">3.1 </span>Objectives</a></li>
<li><a class="reference internal" href="#setting-up-the-project-and-environment"><span class="sectnum">3.2 </span>Setting up the project and environment</a></li>
<li><a class="reference internal" href="#htcondor"><span class="sectnum">3.3 </span>HTCondor</a></li>
<li><a class="reference internal" href="#slurm"><span class="sectnum">3.4 </span>SLURM</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=01f34227"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>